<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.css">
    <link href="https://fonts.googleapis.com/css2?family=Balsamiq+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <title>Kuis</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            font-family: "Balsamiq Sans", cursive;
            display: flex;
            align-items: center;
            justify-content: center;
            background-image: url("/css/Background.png");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            overflow: hidden;
        }

        .title {
            font-weight: bold;
            color: #3c3c6e;
            animation: title 5s ease-in 0.3s infinite alternate both;
        }

        @keyframes title {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }


        .quiz-container {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            width: 400px;
            background-color: #fcfcfc;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            /*   color: #464646; */
        }

        .option {
            display: block;
            border: none;
            cursor: pointer;
            background-color: #dddcdc;
            color: #3c3c6e;
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 15px;
            font-size: 17px;
            font-weight: bold;
        }

        .option:hover {
            background-color: #c2c0c0;
            /* #d6e9ff */
        }

        .button-container {
            align-self: center;
            position: relative;
        }

        .button-container .button {
            font-family: "Balsamiq Sans", cursive;
            background: linear-gradient(90deg, #5db1e6, #104fdd);
            padding: 8px 20px;
            font-size: 16px;
            border-radius: 15px;
            color: white;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            position: relative;
            text-decoration: none;
        }

        .button-container .button:hover {
            background: linear-gradient(90deg, #104fdd, #5db1e6);
        }

        .image-setting:active,
        .image-home:active,
        .image-setting-on:active,
        .audio-controls img:active {
            transform: translateY(10px);
        }

        .image-home {
            position: absolute;
            cursor: pointer;
            top: 10px;
            right: 55px;
            width: 40px;
            height: 40px;
            transition: all 0.3s ease;
        }

        .image-setting {
            position: absolute;
            cursor: pointer;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            transition: all 0.3s ease;
        }

        .image-setting-on {
            position: absolute;
            cursor: pointer;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            transition: all 0.3s ease;
        }

        .image-home:hover,
        .image-setting:hover,
        .image-setting-on:hover,
        .image-mute:hover,
        .image-sound:hover {
            transform: scale(1.3);
            border-radius: 100%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .audio-controls {
            position: absolute;
            top: 55px;
            right: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .audio-controls img {
            width: 40px;
            height: 40px;
            cursor: pointer;
        }

        .dekorasi_1 {
            position: absolute;
            width: 20%;
        }

        .dekorasi_2 {
            position: absolute;
            width: 10%;
        }

        .dekorasi-top-right-1 {
            top: 0;
            right: 0;
        }

        .dekorasi-bottom-left-1 {
            bottom: 0;
            left: 0;
            transform: rotate(180deg);
        }

        .dekorasi-top-left-2 {
            top: 0;
            left: 0;
        }

        .dekorasi-bottom-right-2 {
            bottom: 0;
            right: 0;
            transform: rotate(180deg);
        }
    </style>
</head>

<body>
    <div class="quiz-container">
        <h4 class="title">What subjects are there on Monday, Wednesday, and Friday? ?</h4>
        <button class="option" onclick="checkAnswer(this, 'wrong')">A. English</button>
        <button class="option" onclick="checkAnswer(this, 'wrong')">B. Science</button>
        <button class="option" onclick="checkAnswer(this, 'correct')">C. Math</button>
        <button class="option" onclick="checkAnswer(this, 'wrong')">D. History</button>
        <br>

        <div class="button-container text-center mt-3">
            <a href="/script/halaman_navigasi/unit_1/soal1.html" class="button" id="button-next"
                onclick="nextQuestion()">Next</a>
        </div>
        <p id="feedback" class="mt-3 fw-bold"></p>

        <!-- <button class="btn btn-primary mt-3" onclick="nextQuestion()">Next</button> -->
    </div>

    <img src="/Asset/icon/dekorasi_1.png" alt="Dekorasi_1" class="dekorasi_1 dekorasi-top-right-1">
    <img src="/Asset/icon/dekorasi_1.png" alt="Dekorasi 1" class="dekorasi_1 dekorasi-bottom-left-1">
    <img src="/Asset/icon/dekorasi_2.png" alt="Dekorasi 2" class="dekorasi_2 dekorasi-top-left-2">
    <img src="/Asset/icon/dekorasi_2.png" alt="Dekorasi 2" class="dekorasi_2 dekorasi-bottom-right-2">

    <img src="/Asset/icon/Setting.png" alt="Setting" class="image-setting" id="settingButton">
    <img src="/Asset/icon/Setting On.png" alt="Setting On" class="image-setting-on" id="settingOnButton"
        style="display: none;">

    <a href="/script/halaman_navigasi/halaman_navigasi.html">
        <img src="/Asset/icon/home.png" alt="Home" class="image-home">
    </a>

    <div class="audio-controls">
        <img src="/Asset/icon/Mute.png" alt="Mute" class="image-mute" id="muteButton" style="display: none;">
        <img src="/Asset/icon/Sound.png" alt="Sound" class="image-sound" id="soundButton" style="display: none;">
    </div>

    <audio id="audio" preload="auto" loop>
        <source id="audioSource" src="/Asset/audio/sound.mp3" type="audio/mp3">
    </audio>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const audio = document.getElementById("audio");
            const audioSource = document.getElementById("audioSource");
            const muteButton = document.getElementById("muteButton");
            const soundButton = document.getElementById("soundButton");
            const settingButton = document.getElementById("settingButton");
            const settingOnButton = document.getElementById("settingOnButton");

            // Daftar lagu
            const songs = [
                "/Asset/audio/sound.mp3",
                "/Asset/audio/audio2.mp3",
                "/Asset/audio/audio3.mp3"
            ];
            let currentSongIndex = 0;
            audio.loop = true;

            // Cek session untuk menyimpan progress audio
            if (sessionStorage.getItem("sessionActive")) {
                const savedTime = localStorage.getItem("audioTime");
                const savedIndex = localStorage.getItem("audioIndex");
                if (savedIndex !== null) {
                    currentSongIndex = parseInt(savedIndex);
                    audioSource.src = songs[currentSongIndex];
                    audio.load();
                }
                if (savedTime !== null) {
                    audio.currentTime = parseFloat(savedTime);
                }
            } else {
                localStorage.removeItem("audioTime");
                localStorage.removeItem("audioIndex");
                currentSongIndex = 0;
                audioSource.src = songs[currentSongIndex];
                audio.load();
            }

            sessionStorage.setItem("sessionActive", "true");

            // Atur status mute berdasarkan localStorage
            const isMuted = localStorage.getItem("audioMuted") === "true";
            audio.muted = isMuted;

            function playMainAudio() {
                audio.play().catch(() => {
                    console.log("Autoplay diblokir, menunggu interaksi pengguna.");
                });
            }
            playMainAudio();

            // Simpan progress audio
            audio.addEventListener("timeupdate", function () {
                if (sessionStorage.getItem("sessionActive")) {
                    localStorage.setItem("audioTime", audio.currentTime);
                    localStorage.setItem("audioIndex", currentSongIndex);
                }
            });

            function updateSoundButtons() {
                // Tampilkan tombol mute/sound sesuai dengan status audio
                if (audio.muted) {
                    muteButton.style.display = "block";
                    soundButton.style.display = "none";
                } else {
                    muteButton.style.display = "none";
                    soundButton.style.display = "block";
                }
            }

            // Event handler tombol mute dan sound
            muteButton.addEventListener("click", () => {
                audio.muted = false;
                localStorage.setItem("audioMuted", "false");
                updateSoundButtons();
            });

            soundButton.addEventListener("click", () => {
                audio.muted = true;
                localStorage.setItem("audioMuted", "true");
                updateSoundButtons();
            });

            // Atur tombol setting untuk memunculkan kontrol suara
            settingButton.addEventListener("click", () => {
                settingButton.style.display = "none";
                settingOnButton.style.display = "block";
                updateSoundButtons();
            });

            settingOnButton.addEventListener("click", () => {
                settingOnButton.style.display = "none";
                settingButton.style.display = "block";
                muteButton.style.display = "none";
                soundButton.style.display = "none";
            });

            // Inisialisasi tampilan tombol kontrol suara (disembunyikan secara default)
            muteButton.style.display = "none";
            soundButton.style.display = "none";
        });

        // Fungsi untuk mengecek jawaban kuis
        function checkAnswer(button, status) {
            const feedback = document.getElementById("feedback");
            if (status === "correct") {
                feedback.textContent = "Correct Answer!";
                feedback.style.color = "green";
            } else {
                feedback.textContent = "Wrong Answer!";
                feedback.style.color = "red";
            }
        }

        // Fungsi untuk melanjutkan ke pertanyaan berikutnya
        function nextQuestion() {
            alert("Next question is not available yet!");
        }
    </script>
</body>

</html>